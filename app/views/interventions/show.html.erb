<%= render "intervention-nav", intervention: @intervention %>

<div class="intervention-container p-2 d-flex flex-column gap-3" data-controller="modal">
  <%# GIF Tuto  %>
  <div class ="gif-container rounded">
      <%= image_tag(@case.gif_url) %>
      <%= link_to case_path(@case.id, intervention_id: @intervention.id, lat: params[:lat], long: params[:long], city: params[:city], address: params[:address]), class:"btn btn-blur btn-tuto-replay bg-blur" do %>
        <i class="ph-bold ph-arrow-counter-clockwise"></i>
        Revoir le tuto
      <% end %>
  </div>

  <%# ALERT Relais %>
  <div class="alert-container" data-controller="alert"
     data-alert-interval-value="60000"
     data-alert-duration-value="30000">
    <div class="alert alert-primary d-flex align-items-start gap-2" role="alert">
      <i class="ph-bold ph-info"></i>
      <p>Si possible, faites un relais avec une autre personne afin de rester efficace</p>
    </div>
  </div>

  <%# GIF PULSE %>
  <div class="gif-pulse">
    <%= image_tag "gif-pulse.gif" %>
  </div>

  <%# Cards à rendre fonctionnel : %>
  <div class="actions-cards d-flex gap-2">
    <%#= render "shared/cards/card-dae" %>
    <button id="myBtn-dae" type="button" data-modal-target="btnDae" data-action="click->modal#openModal"  class="card flex-grow-1">
      <div class="card-body d-flex flex-column gap-3">

        <div class="card-head">
          <i class="ph-bold ph-heartbeat"></i>
          <p class="fw-600">Defibrilateur le plus proche</p>
        </div>

        <div class="card-img p-2">
          <%= image_tag "DAE.png" %>
        </div>

      </div>
    </button>
    <%#= render "shared/cards/card-recap" %>
    <button id="myBtn-recap" type="button" data-modal-target="btnRecap" data-action="click->modal#openModal" class="card flex-grow-1">
      <div class="card-body d-flex flex-column gap-3">

        <div class="card-head">
          <i class="ph-bold ph-clipboard-text"></i>
          <p class="fw-600">Récapitulatif de l’intervention</p>
        </div>

        <div class="d-flex flex-column justify-content-between flex-grow-1 text-center">
          <div class="d-flex flex-column gap-2">
            <div class="badge badge-s badge-neutral">
              <i class="ph-bold ph-clock"></i>
              Heure de début
            </div>
            <div class="badge badge-s badge-neutral">
              <i class="ph-bold ph-hourglass-low"></i>
              Durée de la RCP
            </div>
            <div class="badge badge-s badge-neutral">
              <i class="ph-bold ph-gps-fix"></i>
              Localisation
            </div>
          </div>
          <p>voir plus</p>
        </div>

      </div>
    </button>

  </div>


  <%# CODE JULIEN BOUTONS MODAL FONCTIONNELS %>
  <div class="buttons">

    <div id="myModal-recap" data-modal-target="modalRecap" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h4>Récapitulatif temps réel</h4>
          <span class="close" data-modal-target="closeRecap" data-action="click->modal#closeModal">
            <i class="ph-bold ph-x"></i>
          </span>
        </div>
        <div class="modal-body">
          <%= render "modal_recap", intervention: @intervention %>
        </div>
      </div>
    </div>


    <div id="myModal-dae" data-modal-target="modalDae" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h4>Défibrilateur le plus proche</h4>
          <span class="close" data-modal-target="closeDae" data-action="click->modal#closeModal">
            <i class="ph-bold ph-x"></i>
          </span>
        </div>
        <div class="modal-body">
          <%= render partial: "modal_dae", daes: @daes, intervention: @intervention %>
        </div>
      </div>
    </div>
  </div>

</div>
